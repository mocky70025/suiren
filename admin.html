<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>すいれん - 運営用QRコード生成</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>すいれん</h1>
            <p class="subtitle">運営用 - QRコード生成</p>
        </header>

        <main>
            <!-- 認証画面 -->
            <div id="authScreen" class="login-screen">
                <section class="login-section">
                    <h2>運営認証</h2>
                    <div class="login-form">
                        <label for="adminPassword">パスワード</label>
                        <input type="password" id="adminPassword" placeholder="パスワードを入力" required>
                        
                        <button id="adminLoginButton" class="login-button">ログイン</button>
                    </div>
                    <div id="adminError" class="error-message" style="display: none;"></div>
                </section>
            </div>

            <!-- QRコード生成画面 -->
            <div id="adminScreen" style="display: none;">
                <section class="admin-qr-section">
                    <h2>売り手QRコード生成</h2>
                    <div class="seller-select-form">
                        <label for="sellerNameInput">売り手のユーザー名</label>
                        <input type="text" id="sellerNameInput" class="seller-name-input" placeholder="売り手のユーザー名を入力">
                        
                        <label for="sellerPayPayId">売り手のPayPay ID（電話番号またはPayPay ID）</label>
                        <input type="text" id="sellerPayPayId" class="seller-name-input" placeholder="例: 09012345678 または paypay-id">
                        <p class="paypay-id-note">※ PayPayアプリで「マイページ」→「PayPay ID」で確認できます</p>
                        
                        <button id="generateSellerQRButton" class="generate-button">
                            QRコードを生成
                        </button>
                    </div>

                    <!-- QRコード表示エリア -->
                    <div id="qrDisplayArea" class="qr-display-area" style="display: none;">
                        <div class="qr-container">
                            <canvas id="qrCanvas"></canvas>
                            <p class="qr-seller-text">売り手: <span id="qrSellerName"></span></p>
                            <p class="qr-instruction-text">このQRコードをスキャンして支払い</p>
                        </div>
                        <div class="qr-actions">
                            <button id="printQRButton" class="print-button">
                                印刷する
                            </button>
                            <button id="downloadQRButton" class="download-button">
                                画像をダウンロード
                            </button>
                            <button id="closeQRButton" class="close-qr-button">
                                閉じる
                            </button>
                        </div>
                    </div>
                </section>

                <!-- 売り手情報表示セクション -->
                <section class="seller-info-section-admin">
                    <h2>売り手情報</h2>
                    <div id="sellerInfoArea" style="display: none;">
                        <div class="seller-stats">
                            <div class="stat-item">
                                <p class="stat-label">累計入金金額</p>
                                <p class="stat-value" id="totalEarnings">0円</p>
                            </div>
                            <div class="stat-item">
                                <p class="stat-label">取引回数</p>
                                <p class="stat-value" id="transactionCount">0回</p>
                            </div>
                        </div>
                        <div class="transaction-history">
                            <h3>取引履歴</h3>
                            <ul id="transactionList" class="transaction-list">
                                <li class="no-history">まだ取引履歴がありません</li>
                            </ul>
                        </div>
                    </div>
                    <div id="noSellerSelected" class="no-seller-message">
                        売り手を選択すると、累計入金金額と取引履歴が表示されます
                    </div>
                </section>

                <!-- 未処理の受け取り記録セクション -->
                <section class="pending-receipts-section">
                    <h2>未処理の受け取り記録</h2>
                    <div id="pendingReceiptsArea">
                        <p class="loading-text">読み込み中...</p>
                    </div>
                </section>

                <section class="admin-actions">
                    <button id="logoutAdminButton" class="logout-button">ログアウト</button>
                </section>
            </div>
        </main>
    </div>

    <script src="admin.js"></script>
</body>
</html>

