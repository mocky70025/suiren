# すいれん - 学校内転売 支払いシステム

## 概要
学校内での転売のための支払いシステムです。PayPay決済への誘導とポイントカード機能を提供します。

## 機能
- ユーザーアカウント管理（登録・ログイン）
- PayPay決済への誘導
- ポイントカード機能（累計支払い金額の記録）
- 売り手用QRコード生成（印刷・ダウンロード対応）

## セットアップ

### 必要なもの
- Node.js (v14以上)
- npm

### インストール

1. サーバーディレクトリに移動
```bash
cd server
```

2. 依存パッケージをインストール
```bash
npm install
```

3. サーバーを起動
```bash
npm start
```

開発モード（自動再起動）:
```bash
npm run dev
```

4. ブラウザでアクセス
```
http://localhost:3000
```

## 使い方

### 初回利用
1. 「新規登録」でユーザー名とパスワードを設定
2. ログイン後、支払いやQRコード生成が可能

### 買い手
1. ログイン
2. 支払い金額を入力
3. 「PayPayで支払う」をクリック
4. PayPayで支払い完了後、「支払い完了」をクリック
5. ポイントカードに金額が追加されます

### 売り手
1. ログイン
2. 「売り手用 - QRコード生成」セクションで金額を入力
3. 「QRコードを生成」をクリック
4. 生成されたQRコードを印刷またはダウンロード
5. 買い手にQRコードを見せて、PayPayでスキャンしてもらう

## データベース
SQLiteを使用しています。データは `server/data/suiren.db` に保存されます。

## デプロイ（Render）

無料のクラウドホスティングサービス「Render」を使って簡単にデプロイできます。

詳細は `Renderデプロイ手順.md` を参照してください。

### 簡単な手順
1. GitHubにリポジトリをプッシュ
2. Renderでアカウント作成（GitHub連携）
3. 新しいWebサービスを作成
4. ビルドコマンド: `cd server && npm install`
5. スタートコマンド: `cd server && node index.js`
6. デプロイ完了！

## 注意事項
- 実際のPayPay決済には、PayPayのAPI連携が必要です
- 現在はモックアップとして動作します
- 本番環境では、HTTPSの使用とセキュリティ対策を推奨します
- Renderの無料プランは15分間アクセスがないとスリープします（次回アクセス時に自動起動）

